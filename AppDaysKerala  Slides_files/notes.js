/**
 * Handles opening of and synchronization with the reveal.js
 * notes window.
 */
var RevealNotes=function(){function e(){function n(e){var n=Reveal.getCurrentSlide(),r;if(e==="slidechanged"){var i=n.querySelector("aside.notes"),s=Reveal.getIndices().h,o=Reveal.getIndices().v,u,a;n.nextElementSibling&&n.parentNode.nodeName=="SECTION"?(u=s,a=o+1):(u=s+1,a=0),r={notes:i?i.innerHTML:"",indexh:s,indexv:o,nextindexh:u,nextindexv:a,markdown:i?typeof i.getAttribute("data-markdown")=="string":!1}}else e==="fragmentshown"?r={fragment:"next"}:e==="fragmenthidden"&&(r={fragment:"prev"});t.postMessage(JSON.stringify(r),"*")}var e=document.querySelector('script[src$="notes.js"]').src;e=e.replace(/notes\.js(\?.*)?$/,"");var t=window.open(e+"notes.html","reveal.js - Notes","width=1120,height=850");Reveal.addEventListener("slidechanged",function(e){n("slidechanged")}),Reveal.addEventListener("fragmentshown",function(e){n("fragmentshown")}),Reveal.addEventListener("fragmenthidden",function(e){n("fragmenthidden")}),t.addEventListener("load",function(e){n("slidechanged")},!1)}return window.location.search.match(/(\?|\&)notes/gi)!==null&&e(),document.addEventListener("keydown",function(t){if(document.querySelector(":focus")!==null||t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)return;t.keyCode===83&&(t.preventDefault(),e())},!1),{open:e}}();